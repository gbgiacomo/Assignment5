<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Implementing a closed loop control application in Zephyr - Assignment 5: src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Implementing a closed loop control application in Zephyr - Assignment 5
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Control of the environmental light</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains the implementation of the Assignment5.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;zephyr.h&gt;</code><br />
<code>#include &lt;device.h&gt;</code><br />
<code>#include &lt;devicetree.h&gt;</code><br />
<code>#include &lt;drivers/gpio.h&gt;</code><br />
<code>#include &lt;drivers/adc.h&gt;</code><br />
<code>#include &lt;drivers/pwm.h&gt;</code><br />
<code>#include &lt;sys/printk.h&gt;</code><br />
<code>#include &lt;sys/__assert.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;timing/timing.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;hal/nrf_saadc.h&gt;</code><br />
<code>#include &lt;console/console.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c__incl.png" border="0" usemap="#asrc_2main_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5936222e9802dbe8ceb1e99bd667466a"><td class="memItemLeft" align="right" valign="top"><a id="a5936222e9802dbe8ceb1e99bd667466a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>thread_A_prio</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a5936222e9802dbe8ceb1e99bd667466a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21198a64f6d5402279c27249f879ee21"><td class="memItemLeft" align="right" valign="top"><a id="a21198a64f6d5402279c27249f879ee21"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>thread_MANUAL_prio</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a21198a64f6d5402279c27249f879ee21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701ba2774173c549b1864506ec811bf2"><td class="memItemLeft" align="right" valign="top"><a id="a701ba2774173c549b1864506ec811bf2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>thread_AUTOMATIC_prio</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a701ba2774173c549b1864506ec811bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2302ef9dd35fb5d693073b284986b97b"><td class="memItemLeft" align="right" valign="top"><a id="a2302ef9dd35fb5d693073b284986b97b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>thread_FILTER_prio</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a2302ef9dd35fb5d693073b284986b97b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c0d37506a3142a3bd3a34575eedf90"><td class="memItemLeft" align="right" valign="top"><a id="a91c0d37506a3142a3bd3a34575eedf90"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>thread_CONTROL_prio</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a91c0d37506a3142a3bd3a34575eedf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75411a43107c44397adeb785a39cd4f1"><td class="memItemLeft" align="right" valign="top"><a id="a75411a43107c44397adeb785a39cd4f1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>thread_PWM_prio</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a75411a43107c44397adeb785a39cd4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ed7791f41bc6281906a0878492b0894"><td class="memItemLeft" align="right" valign="top"><a id="a2ed7791f41bc6281906a0878492b0894"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>thread_A_period</b>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a2ed7791f41bc6281906a0878492b0894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6423a880df59733d2d9b509c7718d3a9"><td class="memItemLeft" align="right" valign="top"><a id="a6423a880df59733d2d9b509c7718d3a9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STACK_SIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a6423a880df59733d2d9b509c7718d3a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a667158ed9af1b72bf062e54bda71dd4f"><td class="memItemLeft" align="right" valign="top"><a id="a667158ed9af1b72bf062e54bda71dd4f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_NID</b>&#160;&#160;&#160;DT_NODELABEL(adc)</td></tr>
<tr class="separator:a667158ed9af1b72bf062e54bda71dd4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00978ca9e8220475258dcbbbb7d29129"><td class="memItemLeft" align="right" valign="top"><a id="a00978ca9e8220475258dcbbbb7d29129"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_RESOLUTION</b>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a00978ca9e8220475258dcbbbb7d29129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bbc7e1578f01928d36ef7fa94ac4905"><td class="memItemLeft" align="right" valign="top"><a id="a2bbc7e1578f01928d36ef7fa94ac4905"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_GAIN</b>&#160;&#160;&#160;ADC_GAIN_1_4</td></tr>
<tr class="separator:a2bbc7e1578f01928d36ef7fa94ac4905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a317868c528ebe27fbca094a8bc2d910c"><td class="memItemLeft" align="right" valign="top"><a id="a317868c528ebe27fbca094a8bc2d910c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_REFERENCE</b>&#160;&#160;&#160;ADC_REF_VDD_1_4</td></tr>
<tr class="separator:a317868c528ebe27fbca094a8bc2d910c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb8de5967ac4465f35317d818eeb129b"><td class="memItemLeft" align="right" valign="top"><a id="aeb8de5967ac4465f35317d818eeb129b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_ACQUISITION_TIME</b>&#160;&#160;&#160;ADC_ACQ_TIME(ADC_ACQ_TIME_MICROSECONDS, 40)</td></tr>
<tr class="separator:aeb8de5967ac4465f35317d818eeb129b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfca74ee546715af6682194ea92286a"><td class="memItemLeft" align="right" valign="top"><a id="a8bfca74ee546715af6682194ea92286a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_CHANNEL_ID</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a8bfca74ee546715af6682194ea92286a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5508ef7e762284248c2e87e16865522e"><td class="memItemLeft" align="right" valign="top"><a id="a5508ef7e762284248c2e87e16865522e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_CHANNEL_INPUT</b>&#160;&#160;&#160;NRF_SAADC_INPUT_AIN1</td></tr>
<tr class="separator:a5508ef7e762284248c2e87e16865522e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b20d41d6252e9871430c242cb1a56e7"><td class="memItemLeft" align="right" valign="top"><a id="a6b20d41d6252e9871430c242cb1a56e7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BUFFER_SIZE</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a6b20d41d6252e9871430c242cb1a56e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70ed59adcb4159ac551058053e649640"><td class="memItemLeft" align="right" valign="top"><a id="a70ed59adcb4159ac551058053e649640"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SIZE</b>&#160;&#160;&#160;10 /* Size of the vector to filter */</td></tr>
<tr class="separator:a70ed59adcb4159ac551058053e649640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48b150a8660d0152dfde25b42c1755f"><td class="memItemLeft" align="right" valign="top"><a id="ab48b150a8660d0152dfde25b42c1755f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PWM0_NID</b>&#160;&#160;&#160;DT_NODELABEL(pwm0)</td></tr>
<tr class="separator:ab48b150a8660d0152dfde25b42c1755f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e62e873d067860b696a1f47b60916a"><td class="memItemLeft" align="right" valign="top"><a id="a66e62e873d067860b696a1f47b60916a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BOARDLED_PIN</b>&#160;&#160;&#160;DT_PROP(PWM0_NID, ch0_pin)</td></tr>
<tr class="separator:a66e62e873d067860b696a1f47b60916a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0e6f34369bef1deb3a9efae6ac14fb"><td class="memItemLeft" align="right" valign="top"><a id="a4c0e6f34369bef1deb3a9efae6ac14fb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO0_NID</b>&#160;&#160;&#160;DT_NODELABEL(gpio0)</td></tr>
<tr class="separator:a4c0e6f34369bef1deb3a9efae6ac14fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c05b8933cd253785fdd123f6dbfc18"><td class="memItemLeft" align="right" valign="top"><a id="ad3c05b8933cd253785fdd123f6dbfc18"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BOARDBUT1</b>&#160;&#160;&#160;0xb /* Pin at which BUT1 is connected. Addressing is direct (i.e., pin number) */</td></tr>
<tr class="separator:ad3c05b8933cd253785fdd123f6dbfc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a590d906828bd5948fafbef47dc1c3b0c"><td class="memItemLeft" align="right" valign="top"><a id="a590d906828bd5948fafbef47dc1c3b0c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BOARDBUT2</b>&#160;&#160;&#160;0xc /* Pin at which BUT2 is connected. Addressing is direct (i.e., pin number) */</td></tr>
<tr class="separator:a590d906828bd5948fafbef47dc1c3b0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e82ac21050552495e5a8551178bf258"><td class="memItemLeft" align="right" valign="top"><a id="a2e82ac21050552495e5a8551178bf258"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BOARDBUT3</b>&#160;&#160;&#160;0x18 /* Pin at which BUT3 is connected. Addressing is direct (i.e., pin number) */</td></tr>
<tr class="separator:a2e82ac21050552495e5a8551178bf258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee96e1280405ff973ee2b6b07eec104"><td class="memItemLeft" align="right" valign="top"><a id="abee96e1280405ff973ee2b6b07eec104"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BOARDBUT4</b>&#160;&#160;&#160;0x19 /* Pin at which BUT4 is connected. Addressing is direct (i.e., pin number) */</td></tr>
<tr class="separator:abee96e1280405ff973ee2b6b07eec104"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa25f5f9092ccf13998f3cb9e9e1d10a6"><td class="memItemLeft" align="right" valign="top"><a id="aa25f5f9092ccf13998f3cb9e9e1d10a6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>K_THREAD_STACK_DEFINE</b> (thread_A_stack, STACK_SIZE)</td></tr>
<tr class="separator:aa25f5f9092ccf13998f3cb9e9e1d10a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1575764930903a4a3a453b82642f47d3"><td class="memItemLeft" align="right" valign="top"><a id="a1575764930903a4a3a453b82642f47d3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>K_THREAD_STACK_DEFINE</b> (thread_MANUAL_stack, STACK_SIZE)</td></tr>
<tr class="separator:a1575764930903a4a3a453b82642f47d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86abb53b456e692d0627d1efec07cf85"><td class="memItemLeft" align="right" valign="top"><a id="a86abb53b456e692d0627d1efec07cf85"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>K_THREAD_STACK_DEFINE</b> (thread_AUTOMATIC_stack, STACK_SIZE)</td></tr>
<tr class="separator:a86abb53b456e692d0627d1efec07cf85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2bdf76bc612d8720948f4c6398be7d5"><td class="memItemLeft" align="right" valign="top"><a id="af2bdf76bc612d8720948f4c6398be7d5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>K_THREAD_STACK_DEFINE</b> (thread_FILTER_stack, STACK_SIZE)</td></tr>
<tr class="separator:af2bdf76bc612d8720948f4c6398be7d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac67a0006b1f81f07525546909d321f74"><td class="memItemLeft" align="right" valign="top"><a id="ac67a0006b1f81f07525546909d321f74"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>K_THREAD_STACK_DEFINE</b> (thread_CONTROL_stack, STACK_SIZE)</td></tr>
<tr class="separator:ac67a0006b1f81f07525546909d321f74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7fd8f82c6b63d351b9992d8e39cfd1a"><td class="memItemLeft" align="right" valign="top"><a id="ad7fd8f82c6b63d351b9992d8e39cfd1a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>K_THREAD_STACK_DEFINE</b> (thread_PWM_stack, STACK_SIZE)</td></tr>
<tr class="separator:ad7fd8f82c6b63d351b9992d8e39cfd1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61675a61bbec86901b2fe28f008e881c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a61675a61bbec86901b2fe28f008e881c">thread_A_code</a> (void *argA, void *argB, void *argC)</td></tr>
<tr class="memdesc:a61675a61bbec86901b2fe28f008e881c"><td class="mdescLeft">&#160;</td><td class="mdescRight">thread_A_code function implement the clock time  <a href="main_8c.html#a61675a61bbec86901b2fe28f008e881c">More...</a><br /></td></tr>
<tr class="separator:a61675a61bbec86901b2fe28f008e881c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e59d49e91cfc45ace6df16ca1fa6035"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a6e59d49e91cfc45ace6df16ca1fa6035">thread_MANUAL_code</a> (void *argA, void *argB, void *argC)</td></tr>
<tr class="memdesc:a6e59d49e91cfc45ace6df16ca1fa6035"><td class="mdescLeft">&#160;</td><td class="mdescRight">thread_MANUAL_code function implement the manual mode  <a href="main_8c.html#a6e59d49e91cfc45ace6df16ca1fa6035">More...</a><br /></td></tr>
<tr class="separator:a6e59d49e91cfc45ace6df16ca1fa6035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22cc7153cbe37553924bc78d4aee847"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af22cc7153cbe37553924bc78d4aee847">thread_AUTOMATIC_code</a> (void *argA, void *argB, void *argC)</td></tr>
<tr class="memdesc:af22cc7153cbe37553924bc78d4aee847"><td class="mdescLeft">&#160;</td><td class="mdescRight">thread_AUTOMATIC_code function implement the automatic mode  <a href="main_8c.html#af22cc7153cbe37553924bc78d4aee847">More...</a><br /></td></tr>
<tr class="separator:af22cc7153cbe37553924bc78d4aee847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79c8e6a89c4591d59d21aeed5602168"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af79c8e6a89c4591d59d21aeed5602168">thread_FILTER_code</a> (void *argA, void *argB, void *argC)</td></tr>
<tr class="memdesc:af79c8e6a89c4591d59d21aeed5602168"><td class="mdescLeft">&#160;</td><td class="mdescRight">thread_FILTER_code function implement the filtering task  <a href="main_8c.html#af79c8e6a89c4591d59d21aeed5602168">More...</a><br /></td></tr>
<tr class="separator:af79c8e6a89c4591d59d21aeed5602168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2eaab7bbcd7a5599b59a34a3464e6c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af2eaab7bbcd7a5599b59a34a3464e6c0">thread_CONTROL_code</a> (void *argA, void *argB, void *argC)</td></tr>
<tr class="memdesc:af2eaab7bbcd7a5599b59a34a3464e6c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">thread_CONTROL_code function implement the control algorithm  <a href="main_8c.html#af2eaab7bbcd7a5599b59a34a3464e6c0">More...</a><br /></td></tr>
<tr class="separator:af2eaab7bbcd7a5599b59a34a3464e6c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8efa3b68a56da839830fa12b15c0b9e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a8efa3b68a56da839830fa12b15c0b9e3">thread_PWM_code</a> (void *argA, void *argB, void *argC)</td></tr>
<tr class="memdesc:a8efa3b68a56da839830fa12b15c0b9e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">thread_PWM_code function shows the result by a LED  <a href="main_8c.html#a8efa3b68a56da839830fa12b15c0b9e3">More...</a><br /></td></tr>
<tr class="separator:a8efa3b68a56da839830fa12b15c0b9e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf2d34f072541c364197e22fbe860c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aebf2d34f072541c364197e22fbe860c1">but1press_cbfunction</a> ()</td></tr>
<tr class="memdesc:aebf2d34f072541c364197e22fbe860c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">but1press_cbfunction function run ISR for browse up  <a href="main_8c.html#aebf2d34f072541c364197e22fbe860c1">More...</a><br /></td></tr>
<tr class="separator:aebf2d34f072541c364197e22fbe860c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade623fb239fed3e88e7df042a34c9a73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ade623fb239fed3e88e7df042a34c9a73">but2press_cbfunction</a> ()</td></tr>
<tr class="memdesc:ade623fb239fed3e88e7df042a34c9a73"><td class="mdescLeft">&#160;</td><td class="mdescRight">but2press_cbfunction function run ISR for browse down  <a href="main_8c.html#ade623fb239fed3e88e7df042a34c9a73">More...</a><br /></td></tr>
<tr class="separator:ade623fb239fed3e88e7df042a34c9a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f2a8ee68ac40b30682635dcdb9d814"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a12f2a8ee68ac40b30682635dcdb9d814">but3press_cbfunction</a> ()</td></tr>
<tr class="memdesc:a12f2a8ee68ac40b30682635dcdb9d814"><td class="mdescLeft">&#160;</td><td class="mdescRight">but3press_cbfunction function run ISR for changing mode  <a href="main_8c.html#a12f2a8ee68ac40b30682635dcdb9d814">More...</a><br /></td></tr>
<tr class="separator:a12f2a8ee68ac40b30682635dcdb9d814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3759a143505ebd2ace97ac6f02d05ab3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a3759a143505ebd2ace97ac6f02d05ab3">but4press_cbfunction</a> ()</td></tr>
<tr class="memdesc:a3759a143505ebd2ace97ac6f02d05ab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">but4press_cbfunction function run ISR for activating the console  <a href="main_8c.html#a3759a143505ebd2ace97ac6f02d05ab3">More...</a><br /></td></tr>
<tr class="separator:a3759a143505ebd2ace97ac6f02d05ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5f0d05ef37ac0d607a3d624fd8c90e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a2d5f0d05ef37ac0d607a3d624fd8c90e">char2int</a> (char ch)</td></tr>
<tr class="memdesc:a2d5f0d05ef37ac0d607a3d624fd8c90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">char2int function convert numerical char to int  <a href="main_8c.html#a2d5f0d05ef37ac0d607a3d624fd8c90e">More...</a><br /></td></tr>
<tr class="separator:a2d5f0d05ef37ac0d607a3d624fd8c90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb6372ac406fb04afb0dbde07c128b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a8fb6372ac406fb04afb0dbde07c128b9">printDays</a> (uint8_t day)</td></tr>
<tr class="memdesc:a8fb6372ac406fb04afb0dbde07c128b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">printDays function print the days  <a href="main_8c.html#a8fb6372ac406fb04afb0dbde07c128b9">More...</a><br /></td></tr>
<tr class="separator:a8fb6372ac406fb04afb0dbde07c128b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41681a4f770a4314939bd47e174cab0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a41681a4f770a4314939bd47e174cab0c">userSetup</a> ()</td></tr>
<tr class="memdesc:a41681a4f770a4314939bd47e174cab0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">userSetup function activate the console  <a href="main_8c.html#a41681a4f770a4314939bd47e174cab0c">More...</a><br /></td></tr>
<tr class="separator:a41681a4f770a4314939bd47e174cab0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">main</a> (void)</td></tr>
<tr class="memdesc:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="mdescLeft">&#160;</td><td class="mdescRight">main function run project  <a href="main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">More...</a><br /></td></tr>
<tr class="separator:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6d4412666e45fbd3d7bb2e537e3e4921"><td class="memItemLeft" align="right" valign="top"><a id="a6d4412666e45fbd3d7bb2e537e3e4921"></a>
struct k_thread&#160;</td><td class="memItemRight" valign="bottom"><b>thread_A_data</b></td></tr>
<tr class="separator:a6d4412666e45fbd3d7bb2e537e3e4921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c3733d3dba233e5d27c9f2a4eb9607b"><td class="memItemLeft" align="right" valign="top"><a id="a9c3733d3dba233e5d27c9f2a4eb9607b"></a>
struct k_thread&#160;</td><td class="memItemRight" valign="bottom"><b>thread_MANUAL_data</b></td></tr>
<tr class="separator:a9c3733d3dba233e5d27c9f2a4eb9607b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5024d0cb525fe74820f641d4e8b8f781"><td class="memItemLeft" align="right" valign="top"><a id="a5024d0cb525fe74820f641d4e8b8f781"></a>
struct k_thread&#160;</td><td class="memItemRight" valign="bottom"><b>thread_AUTOMATIC_data</b></td></tr>
<tr class="separator:a5024d0cb525fe74820f641d4e8b8f781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713f174adb34bea3c36a8c13b320b7f9"><td class="memItemLeft" align="right" valign="top"><a id="a713f174adb34bea3c36a8c13b320b7f9"></a>
struct k_thread&#160;</td><td class="memItemRight" valign="bottom"><b>thread_FILTER_data</b></td></tr>
<tr class="separator:a713f174adb34bea3c36a8c13b320b7f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adab90cd41b4efcb4b074c6eee8c34cda"><td class="memItemLeft" align="right" valign="top"><a id="adab90cd41b4efcb4b074c6eee8c34cda"></a>
struct k_thread&#160;</td><td class="memItemRight" valign="bottom"><b>thread_CONTROL_data</b></td></tr>
<tr class="separator:adab90cd41b4efcb4b074c6eee8c34cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0feabd52ecd31e876f337596520a71a2"><td class="memItemLeft" align="right" valign="top"><a id="a0feabd52ecd31e876f337596520a71a2"></a>
struct k_thread&#160;</td><td class="memItemRight" valign="bottom"><b>thread_PWM_data</b></td></tr>
<tr class="separator:a0feabd52ecd31e876f337596520a71a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac68d6bd12397c115c8f5fb8b8dae16"><td class="memItemLeft" align="right" valign="top"><a id="aaac68d6bd12397c115c8f5fb8b8dae16"></a>
k_tid_t&#160;</td><td class="memItemRight" valign="bottom"><b>thread_A_tid</b></td></tr>
<tr class="separator:aaac68d6bd12397c115c8f5fb8b8dae16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f943630e2a547bece990a21c24ec38"><td class="memItemLeft" align="right" valign="top"><a id="a67f943630e2a547bece990a21c24ec38"></a>
k_tid_t&#160;</td><td class="memItemRight" valign="bottom"><b>thread_MANUAL_tid</b></td></tr>
<tr class="separator:a67f943630e2a547bece990a21c24ec38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc87d5727f53b2e1510cc70389e87be4"><td class="memItemLeft" align="right" valign="top"><a id="abc87d5727f53b2e1510cc70389e87be4"></a>
k_tid_t&#160;</td><td class="memItemRight" valign="bottom"><b>thread_AUTOMATIC_tid</b></td></tr>
<tr class="separator:abc87d5727f53b2e1510cc70389e87be4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a377102d48689a793afa390e68d42e58b"><td class="memItemLeft" align="right" valign="top"><a id="a377102d48689a793afa390e68d42e58b"></a>
k_tid_t&#160;</td><td class="memItemRight" valign="bottom"><b>thread_FILTER_tid</b></td></tr>
<tr class="separator:a377102d48689a793afa390e68d42e58b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a336c430235a1cc004e1ae7b6b17af4b7"><td class="memItemLeft" align="right" valign="top"><a id="a336c430235a1cc004e1ae7b6b17af4b7"></a>
k_tid_t&#160;</td><td class="memItemRight" valign="bottom"><b>thread_CONTROL_tid</b></td></tr>
<tr class="separator:a336c430235a1cc004e1ae7b6b17af4b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c28ffb05ed9e2538da054e8ed7162d5"><td class="memItemLeft" align="right" valign="top"><a id="a0c28ffb05ed9e2538da054e8ed7162d5"></a>
k_tid_t&#160;</td><td class="memItemRight" valign="bottom"><b>thread_PWM_tid</b></td></tr>
<tr class="separator:a0c28ffb05ed9e2538da054e8ed7162d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e3390ce7bf44542971da0b20e8c052"><td class="memItemLeft" align="right" valign="top"><a id="a93e3390ce7bf44542971da0b20e8c052"></a>
struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><b>sem_a2manual</b></td></tr>
<tr class="separator:a93e3390ce7bf44542971da0b20e8c052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8365ce7e8425ec52ed5e5a3156a63c60"><td class="memItemLeft" align="right" valign="top"><a id="a8365ce7e8425ec52ed5e5a3156a63c60"></a>
struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><b>sem_a2automatic</b></td></tr>
<tr class="separator:a8365ce7e8425ec52ed5e5a3156a63c60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa17895e554a2e3805c2649c43d23342"><td class="memItemLeft" align="right" valign="top"><a id="aaa17895e554a2e3805c2649c43d23342"></a>
struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><b>sem_auto2filter</b></td></tr>
<tr class="separator:aaa17895e554a2e3805c2649c43d23342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29a7e1840ecb948dbb31913bab999503"><td class="memItemLeft" align="right" valign="top"><a id="a29a7e1840ecb948dbb31913bab999503"></a>
struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><b>sem_filter2control</b></td></tr>
<tr class="separator:a29a7e1840ecb948dbb31913bab999503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7047379285dea61232b9950aef0c06"><td class="memItemLeft" align="right" valign="top"><a id="a2c7047379285dea61232b9950aef0c06"></a>
struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><b>sem_manControl2pwm</b></td></tr>
<tr class="separator:a2c7047379285dea61232b9950aef0c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d0933bb7a6454573b3ade529a72418"><td class="memItemLeft" align="right" valign="top"><a id="a80d0933bb7a6454573b3ade529a72418"></a>
struct k_timer&#160;</td><td class="memItemRight" valign="bottom"><b>my_timer</b></td></tr>
<tr class="separator:a80d0933bb7a6454573b3ade529a72418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a445f79326d40128ece59a749adff6894"><td class="memItemLeft" align="right" valign="top"><a id="a445f79326d40128ece59a749adff6894"></a>
const struct device *&#160;</td><td class="memItemRight" valign="bottom"><b>adc_dev</b> = NULL</td></tr>
<tr class="separator:a445f79326d40128ece59a749adff6894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a86ff63619b8e98baa6c18f0f013ff"><td class="memItemLeft" align="right" valign="top"><a id="ad0a86ff63619b8e98baa6c18f0f013ff"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>samples</b> [SIZE] ={0,0,0,0,0,0,0,0,0,0}</td></tr>
<tr class="separator:ad0a86ff63619b8e98baa6c18f0f013ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb1d69d6a50e913dcb35f2e546f79b81"><td class="memItemLeft" align="right" valign="top"><a id="acb1d69d6a50e913dcb35f2e546f79b81"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>filteredSamples</b> [SIZE] ={0,0,0,0,0,0,0,0,0,0}</td></tr>
<tr class="separator:acb1d69d6a50e913dcb35f2e546f79b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac73839a7c6cf3b1544ee9e5ef20c138a"><td class="memItemLeft" align="right" valign="top"><a id="ac73839a7c6cf3b1544ee9e5ef20c138a"></a>
int8_t&#160;</td><td class="memItemRight" valign="bottom"><b>index</b> =-1</td></tr>
<tr class="separator:ac73839a7c6cf3b1544ee9e5ef20c138a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77699ad054dddaed3e88cb9da2b7715c"><td class="memItemLeft" align="right" valign="top"><a id="a77699ad054dddaed3e88cb9da2b7715c"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>average</b> =0</td></tr>
<tr class="separator:a77699ad054dddaed3e88cb9da2b7715c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f78888892d66e2d4b9828c6d22ab057"><td class="memItemLeft" align="right" valign="top"><a id="a3f78888892d66e2d4b9828c6d22ab057"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>upperLevel</b> =0</td></tr>
<tr class="separator:a3f78888892d66e2d4b9828c6d22ab057"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dec690e27646e7c332b6477f6340bd7"><td class="memItemLeft" align="right" valign="top"><a id="a8dec690e27646e7c332b6477f6340bd7"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>lowerLevel</b> =0</td></tr>
<tr class="separator:a8dec690e27646e7c332b6477f6340bd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b41b45488abcd23c6936f38ee89d609"><td class="memItemLeft" align="right" valign="top"><a id="a9b41b45488abcd23c6936f38ee89d609"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>pwmPeriod_us</b> = 500</td></tr>
<tr class="separator:a9b41b45488abcd23c6936f38ee89d609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf8f38ac9dde4f58cfa5b0f2243b04dd"><td class="memItemLeft" align="right" valign="top"><a id="aaf8f38ac9dde4f58cfa5b0f2243b04dd"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>mode</b> =0</td></tr>
<tr class="separator:aaf8f38ac9dde4f58cfa5b0f2243b04dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7150c0aea2a76b464fdd9c7117cb02"><td class="memItemLeft" align="right" valign="top"><a id="a8e7150c0aea2a76b464fdd9c7117cb02"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>up</b> =0</td></tr>
<tr class="separator:a8e7150c0aea2a76b464fdd9c7117cb02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a8ef290e3747f284e7ce226ddd821bc"><td class="memItemLeft" align="right" valign="top"><a id="a7a8ef290e3747f284e7ce226ddd821bc"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>down</b> =0</td></tr>
<tr class="separator:a7a8ef290e3747f284e7ce226ddd821bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c3ca3b9679dfc32a782ee50b24cdfd"><td class="memItemLeft" align="right" valign="top"><a id="af6c3ca3b9679dfc32a782ee50b24cdfd"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>cons</b> =0</td></tr>
<tr class="separator:af6c3ca3b9679dfc32a782ee50b24cdfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a298634174b44c7073a923835c57f6376"><td class="memItemLeft" align="right" valign="top"><a id="a298634174b44c7073a923835c57f6376"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>dark</b> =0</td></tr>
<tr class="separator:a298634174b44c7073a923835c57f6376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30ba07e2a0bd07a15e45a92c32db9c5"><td class="memItemLeft" align="right" valign="top"><a id="ab30ba07e2a0bd07a15e45a92c32db9c5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>state</b> =0</td></tr>
<tr class="separator:ab30ba07e2a0bd07a15e45a92c32db9c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains the implementation of the Assignment5. </p>
<p>The goal of this code is set the light intensity of the enviromental at a certain threshold, preaviusly defined by the user. In the manual mode the user can sets directly the light intensity of the LED, through the two switches. Otherwise, in the automatic mode, LED is power by the control algorithm. The system work in real-time.</p>
<dl class="section author"><dt>Author</dt><dd>Mattia Longo and Giacomo Bego </dd></dl>
<dl class="section date"><dt>Date</dt><dd>25 Jun 2022 </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000001">Bug:</a></b></dt><dd>No known bugs </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aebf2d34f072541c364197e22fbe860c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebf2d34f072541c364197e22fbe860c1">&#9670;&nbsp;</a></span>but1press_cbfunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void but1press_cbfunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>but1press_cbfunction function run ISR for browse up </p>
<p>but1press_cbfunction is the service routine related to the interrupt for browsing up. It just change the state of the volatile "up" variable </p>

</div>
</div>
<a id="ade623fb239fed3e88e7df042a34c9a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade623fb239fed3e88e7df042a34c9a73">&#9670;&nbsp;</a></span>but2press_cbfunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void but2press_cbfunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>but2press_cbfunction function run ISR for browse down </p>
<p>but2press_cbfunction is the service routine related to the interrupt for browsing up. It just change the state of the volatile "down" variable </p>

</div>
</div>
<a id="a12f2a8ee68ac40b30682635dcdb9d814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12f2a8ee68ac40b30682635dcdb9d814">&#9670;&nbsp;</a></span>but3press_cbfunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void but3press_cbfunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>but3press_cbfunction function run ISR for changing mode </p>
<p>but3press_cbfunction is the service routine related to the interrupt for changing mode. It just modify the state of the volatile "mode" variable </p>

</div>
</div>
<a id="a3759a143505ebd2ace97ac6f02d05ab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3759a143505ebd2ace97ac6f02d05ab3">&#9670;&nbsp;</a></span>but4press_cbfunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void but4press_cbfunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>but4press_cbfunction function run ISR for activating the console </p>
<p>but4press_cbfunction is the service routine related to the interrupt for activating console. It just modify the state of the volatile "dark" and "cons" variables </p>

</div>
</div>
<a id="a2d5f0d05ef37ac0d607a3d624fd8c90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d5f0d05ef37ac0d607a3d624fd8c90e">&#9670;&nbsp;</a></span>char2int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int char2int </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>char2int function convert numerical char to int </p>
<p>It convert the numerical char variables to integer values</p>
<dl class="section author"><dt>Author</dt><dd>Mattia Longo and Giacomo Bego </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[ch]</td><td>char variable to converter (only value from 0 to 9) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer value converted </dd></dl>

</div>
</div>
<a id="a6288eba0f8e8ad3ab1544ad731eb7667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6288eba0f8e8ad3ab1544ad731eb7667">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main function run project </p>
<p>main function sets the ADC, creates the tasks and initilizes the semaphores. </p>

</div>
</div>
<a id="a8fb6372ac406fb04afb0dbde07c128b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb6372ac406fb04afb0dbde07c128b9">&#9670;&nbsp;</a></span>printDays()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printDays </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>day</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>printDays function print the days </p>
<p>This function print the days of the week to console</p>
<dl class="section author"><dt>Author</dt><dd>Mattia Longo and Giacomo Bego </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[day]</td><td>integer value that indicates the day from 0 to 6 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61675a61bbec86901b2fe28f008e881c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61675a61bbec86901b2fe28f008e881c">&#9670;&nbsp;</a></span>thread_A_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_A_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>thread_A_code function implement the clock time </p>
<p>This function occurs every 100 ms. The aims are increment the current hour, date and verify the function mode selected. The user interface is activate cecking the switch state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[*argA,*argB,*argC]</td><td>void pointer parameters (not used in this project) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void function-&gt; it does not return anything </dd></dl>

</div>
</div>
<a id="af22cc7153cbe37553924bc78d4aee847"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af22cc7153cbe37553924bc78d4aee847">&#9670;&nbsp;</a></span>thread_AUTOMATIC_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_AUTOMATIC_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>thread_AUTOMATIC_code function implement the automatic mode </p>
<p>If the acquisition by the ADC gets a correct value, it pass the sample by a semaphore to filter task, otherwise it set it to a "safety value" equal to zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[*argA,*argB,*argC]</td><td>void pointer parameters (not used in this project) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void function-&gt; it does not return anything </dd></dl>

</div>
</div>
<a id="af2eaab7bbcd7a5599b59a34a3464e6c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2eaab7bbcd7a5599b59a34a3464e6c0">&#9670;&nbsp;</a></span>thread_CONTROL_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_CONTROL_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>thread_CONTROL_code function implement the control algorithm </p>
<p>This function occurs in the automatic mode. The control algorithm is implemented here. The filtered output value is passed from the FILTER task. The current hour and date are compare with the periods setted by the user. When the ON periods occurs, the control algorithm increase or decrese the PWM high period value in order to reach the environmental intensity setted by the user.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[*argA,*argB,*argC]</td><td>void pointer parameters (not used in this project) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void function-&gt; it does not return anything </dd></dl>

</div>
</div>
<a id="af79c8e6a89c4591d59d21aeed5602168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79c8e6a89c4591d59d21aeed5602168">&#9670;&nbsp;</a></span>thread_FILTER_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_FILTER_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>thread_FILTER_code function implement the filtering task </p>
<p>Every new sample is taken from the shared memory and put into a vector from which we extract the average value of the last 10 samples. Then the goal of the task is to copy the starting vector into another vector except for the samples "more than 5% far" form the average. At the end, a new average on the final vector has been done. The result is saved in another shared memory (global variable) and passed to the output task by another semaphore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[*argA,*argB,*argC]</td><td>void pointer parameters (not used in this project) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void function-&gt; it does not return anything </dd></dl>

</div>
</div>
<a id="a6e59d49e91cfc45ace6df16ca1fa6035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e59d49e91cfc45ace6df16ca1fa6035">&#9670;&nbsp;</a></span>thread_MANUAL_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_MANUAL_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>thread_MANUAL_code function implement the manual mode </p>
<p>When the user press the button 3 this thread occurs. The aim is increase and deacrease the light intensity of the LED, through two switches ("up" and "down"). Pressing them, the high level period of the PWM change. This initial value is taken from the shared memory. The output is saved in a shared memory (global variable) and passed to the LED power task by another semaphore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[*argA,*argB,*argC]</td><td>void pointer parameters (not used in this project) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void function-&gt; it does not return anything </dd></dl>

</div>
</div>
<a id="a8efa3b68a56da839830fa12b15c0b9e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8efa3b68a56da839830fa12b15c0b9e3">&#9670;&nbsp;</a></span>thread_PWM_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_PWM_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>thread_PWM_code function shows the result by a LED </p>
<p>This function gets the filtered result from task CONTROL and show the result so that it is proportional to a PWM duty cicle of a LED.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[*argA,*argB,*argC]</td><td>void pointer parameters (not used in this project) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void function-&gt; it does not return anything </dd></dl>

</div>
</div>
<a id="a41681a4f770a4314939bd47e174cab0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41681a4f770a4314939bd47e174cab0c">&#9670;&nbsp;</a></span>userSetup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void userSetup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>userSetup function activate the console </p>
<p>Activate the user interface console to setup the ON/OFF period and the current time.</p>
<dl class="section author"><dt>Author</dt><dd>Mattia Longo and Giacomo Bego </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
